// TODO: tests properly over to ts and make sure they all work